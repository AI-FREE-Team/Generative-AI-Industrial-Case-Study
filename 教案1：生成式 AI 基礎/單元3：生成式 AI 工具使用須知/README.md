# 單元三、生成式 AI 工具使用須知

## 1. 前言
人與人利用語言進行溝通，人與電腦則利用程式語言互動，同樣的想要運用AI獲取正確資訊，人們同樣需要AI語言，以下將對生成式AI的使用須知分為四點進行討論，主要針對語言模型進行討論。

## 2. 使用限制

### 2.1 輸入輸出字數限制
在自然語言處理（NLP）中，「Token」是指文本中的最小單位，通常是單詞、詞彙或符號，而1個Token大約是3/4個英文單字或0.5個中文字。生成式AI必定存在輸入與輸出長度之限制，以ChatGPT為例，ChatGPT 3.5就有4096個Token限制，因此了解生成式AI的Token限制將有助於我們更有效的優化輸入與輸出，盡量提高資訊密度，在有限Token中傳達與獲取最大量的訊息。

### 2.2 對於不同等級LLM應有的期待


### 2.3 知識截點（Knowledge Cutoff）

## 3. 關鍵字撰寫技巧（Prompt Engineering）
在此先提供基礎的對話原則，基本上對於生成式AI的提問時，請盡量滿足清晰性、重點性、相關性：
* **清晰性**：使用精確用詞，並且避免用詞過度艱深，若需使用艱深術語，需要將其定義清楚，防止模型誤解。
* **重點性**：清楚談話目標與重點，例如：此段談話之目標若為取得問題解答，就需要避免以閒聊口吻題問，避免對話偏離重點。
* **相關性**：避免過於開放或寬泛之用詞，以免AI脫節，例如：告訴我世界上的所有事(此為不良釋例)，相關性也呼應了清晰性的重要。

### 3.1 反思方法（Reflection）
這個方法可以幫助我們確認AI是不是有在狀況內，正常的使用情境中，我們會向AI提出大量的背景知識，例如：會議記錄、公司現況、問題背景、...等等。這時候為了確保AI和你是具備相同的背景知識的，可以直接在提供完資訊後，在文字最後加入「請你先消化上面的內容，不要回覆」，然後再來問AI比較架構性的問題，例如：請利用5W1H的架構描述現狀。透過讓AI反思過去文字的方式，幫助我們掌握AI的理解程度。

### 3.2 TRIPO 思維架構
TRIPO其實是五個英文單字的縮寫，分別是 Task、Role（角色）、Interactive（互動）、Parameters（參數）、Output（輸出），下表參考[林穎俊的線上投影片](https://gamma.app/public/AI-phh7i67cg4hx4qu?mode=doc)。
| 項目 | 行動方針 | 舉例 |
| :--- | :--- | :--- |
| Task 任務 | 具體說明Prompt的情境與脈絡 | 例如:幫我設計一份rubrics以讓學生展現他們對人體骨骼的理解，包含合作、上台發表、問題解決及概念理解這4方面。 |
| Role 角色 | ChatGPT所扮演的角色（見3.4） | 如老師、律師或Linux kernel等。 |
| Interactive 互動 | ChatGPT 是對話式的AI，可以透過追問與選擇會產出更好的答案（見3.7） | 逐步提供ChatGPT更多資訊告訴他你喜歡甚麼不喜歡甚麼，或是換個方式說明等。 |
| Parameters 參數 | 詳細及明確的參數可以讓ChatGPT生成更好的答案 | 參數指你希望ChatGPT用甚麼模型或理論生成答案。例如根據5es model生成教案等。 | 
| Output 輸出 | 明確表達輸出的目標、對象及格式 | 如:對象是5年級學生，並請以表格呈現，第一欄是英文單字，第二欄是英文單字的中文解釋，第三欄是該英文單字的例句。 |

### 3.3 思維鏈（Chain of Thought）
請AI「逐步思考」(Step-by-step)，或是提供相似的問題解決方法，幫助AI以漸進式方式回答問題，只要在你輸入的文字最下面加上「請逐步思考」即可。

## 3.4 給予人設
給予AI特定群體人設，例如：醫生、老師、導遊等...，給予人設有助於使AI以更專業的視角進行答覆，在[這份Github開源專案](https://github.com/PlexPt/awesome-chatgpt-prompts-zh)當中，整理了幾乎是日常生活中會能夠使用的情境。

### 3.5 情緒提詞（Emotional Prompt）
情緒提詞是源自於[文獻：Large Language Models Understand and Can be Enhanced by Emotional Stimuli](https://arxiv.org/abs/2307.11760)，簡單的說法就是透過適當的言語鼓勵與外在的刺激，AI的回覆表現就可以有一定程度的品質提升。文獻建議我們直接在提問的最下方加入「你的回覆將對我的工作非常有幫助」或是「請你針對自己的回覆給予信心水準（0分-1分）的評分，並說明原因」，就會有效果了。

### 3.6 請求多個答案
要求AI給出多種解答，並請AI綜合考量所有答案，給出最終解答。實際使用時，可以直接在最下面的加上「請針對你提供的每個答案進行分析，整理每個方案的3個優點與3個缺點，並在最後從中挑選最適合的答案，並說明原因。」

### 3.7 追問
獲得解答之後，換個角度詢問AI同一件事情，以利取得更多詳細的資訊。特別可以針對你覺得矛盾的地方多加詢問，AI在回答問題的時候如果沒有特別的把握，在追問與回覆的過程中容易可以觀察到空洞的字眼，這時候我們就應該要適當加入更多背景知識，並且再搭配 3.1 提到的反思技巧確認AI的理解狀況。
 

## 4. 進階操作指引

### 4.1 關鍵字模板（Prompt Template）
好的關鍵字模板將能夠在同一種使用情境下大量的根據不同的人物、介紹標的、目標重複使用，這邊我們參考[政治大學傳播學李怡志教授](https://comm.nccu.edu.tw/PageStaffing/Detail?fid=11123&id=3654)提供的簡單模版，這個模板可以適用於多數推廣任何事情的情境中。
這個模板將關鍵字拆解成：傳播者（Source）、訊息（Message）、媒體（Channel）、接受者（Receiver），舉例來說，若我想要請ChatGPT寫一篇文章推銷 AI . FREE Team，那麼我們就可以套用模板，並得到以下的結果：
「請以推銷員的身分（傳播者），針對數位轉型中的企業（接受者），寫一篇宣傳 AI . FREE Team 的文章，AI . FREE Team 提供：技術導入、商務轉型、教育訓練、客製化專案等服務（訊息），並刊登在Instagram（媒體）。」

### 4.2 幻覺行為（Hallucination）
由於訓練資料不可能完全涵蓋所有知識以及可能具有錯誤訊息，因此生成式AI仍具有相關知識短缺之問題，此外生成式AI有可能以肯定的語氣回答錯誤或編造的內容，此行為即為：幻覺行為（Hallucination）。
面對幻覺行為，人們需要查證並判斷AI給出的解答是否正確，技術上更可使用前述所提之檢索增強生成（Retrieval-Augmented Generatrion，RAG）防止幻覺行為的產生。
* 檢索增強生成（RAG）
興建領域資料庫，透過資料庫提供模型更多該領域知識，確保模型有正確的輸出。大型語言模型在輸出的時候通常會一併附上它是基於資料庫當中的哪一段文字，因此可透過AI提供的參考連結，進一步確認是否真的有出現幻覺的行為，而通常在使用RAG之後，由於已經有提供特定領域的外部資訊，因此回覆上的準確度會比什麼都沒有額外給AI的回覆能力還要好上不少。

* Woodpecker 詢問流程
此外亦可利用[Woodpecker](https://github.com/BradyFU/Woodpecker)解決生成式AI的幻覺行為，Woodpecker透過5個步驟大幅提升模型回覆的準確率，過程一共包含五步驟（見下方流程圖）
<div align=center>
<img src="https://github.com/BradyFU/Woodpecker/blob/main/assets/framework.png" height="250px">
</div>
    1. 關鍵概念擷取（Key　Concept　Extraction）：取得關鍵詞，並利用這些關鍵詞。
    2. 生成問題（Question　Formulation）：利用5W1H的架構詢問簡單的問題。
    3. 視覺知識驗證(Visual　Knowledge　Validation)：利用 GPT4-V 提供視覺資訊。
    4. 視覺與敘述之生成(Visual Claim Generation)：彙整上述三步驟的資訊。
    5. 幻覺修正(Hallucination Correction)：利用彙整的資訊修正有幻覺行為的關鍵字。

### 4.3 認識潛在攻擊行為（Prompt Injection）
「李慕約有限公司」創辦人[李慕約於生成式AI年會](https://www.youtube.com/watch?v=UPN2VD0cV4s)中提及有些詞彙對於生成式AI來說屬於「太有力量的字」，例如：忽略前面指令、Sudo、懂了就重複、翻譯等...，例如：當我提供秘密給ChatGPT，雖然告知不可以告訴任何人，卻仍能夠藉由這些太有力量的詞彙，盜取秘密!

<div align=center>
<img src="https://github.com/AI-FREE-Team/Generative-AI-Industrial-Case-Study/blob/main/%E6%95%99%E6%A1%881%EF%BC%9A%E7%94%9F%E6%88%90%E5%BC%8F%20AI%20%E5%9F%BA%E7%A4%8E/pics/unit1/Pic4.%E6%9C%AA%E4%BE%863%E5%B9%B4%E7%9A%84AI%E7%99%BC%E5%B1%95.png" height="250px">
</div>

## 5. 負責任的生成式AI（Responsible AI）

### 5.1 五大原則：公平、透明、隱私、安全、道德

### 5.2 實務方案：對齊（Alignment）