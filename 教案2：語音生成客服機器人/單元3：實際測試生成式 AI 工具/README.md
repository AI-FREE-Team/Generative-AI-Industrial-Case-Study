# 單元三、實際測試生成式 AI 工具

## 1. 前言
在本單元會將焦點著重於金融業務中，透過ChatGPT演練真實對話情境，了解生成式AI如何幫我們處理銀行業務問題，如何協助工作變得更聰明、更有效率。

## 2. 金融領域使用情境與流程
通常我們會需要使用到語音客服，一定是因為我們遇到問題或是有一些與金融領域相關的需求出現，根據單元一提到的情況，如果我今天只是想要查找自己在上個月的信用卡明細資訊，但是因為我是在非白天的時段有這個需求，因此就需要依循著語音客服機器人的引導，逐步地靠近我所需要的服務。

### 2.1 規則型（Rule-based）機器人
過去金融領域（以及大部分的客服機器人）所使用的語音客服機器人皆屬於Rule-based的服務項目，他們所能夠服務的項目已經被固定下了，因此可以透過基礎的程式語言，將基本的`if else`條件判斷寫進語音客服的流程當中。

### 2.2 智能客服語音機器人
然而在生成式AI出現的時間點，參考第二單元介紹到各式各樣的生成式AI與既存的自然語言處理（NLP）演算法，我們極有可能可以打造一個接近真人服務的客服機器人。

在智能客服語音機器人出現之後，我們撥打語音客服機器人的第一個動作不再是聆聽客服機器人一個項目一個項目的廣播，而是由我們（客戶）主動提出問題，而且可以使用任何語言提出問題，因為對於AI而言，任何語言的自動辨識（ASR）都可以達到相當好的程度；在客服機器人接收到資訊之後，會將資訊送給GPT系列的大型語言模型（LLM），此時語言模型扮演著大腦的角色，可能會透過RAG的技術參考到過去常見的QA問答集，思考著如何用最短的文句呈現給客戶；最後，就會利用文字轉語音（TTS）的技術，將可能的解決方案透過語音的方式提供給客戶。

然而，這整個流程所涉及的技術層面過於複雜，因此欲打造能夠完成上述想像流程的客服語音機器人，通常還是會委託專業的技術團隊。若是讀者有意委託相關技術團隊建置智能客服語音機器人，建議可以先閱覽過[本教案](https://github.com/AI-FREE-Team/Generative-AI-Industrial-Case-Study/tree/main/%E6%95%99%E6%A1%882%EF%BC%9A%E8%AA%9E%E9%9F%B3%E7%94%9F%E6%88%90%E5%AE%A2%E6%9C%8D%E6%A9%9F%E5%99%A8%E4%BA%BA)以及[教案一：生成式AI基礎](https://github.com/AI-FREE-Team/Generative-AI-Industrial-Case-Study/tree/main/%E6%95%99%E6%A1%881%EF%BC%9A%E7%94%9F%E6%88%90%E5%BC%8F%20AI%20%E5%9F%BA%E7%A4%8E)後，再開啟對話，應能大幅增加委託溝通的效率。

## 3. ChatGPT 實際對話範例

在實際委託技術團隊開發相關的語音客服機器人之前，強烈建議讀者先測試看看大型語言模型（LLM）的能耐，一個能夠處理複雜邏輯任務的語言模型在智能客服機器人就相當於**具備思維能力的大腦**，在本節我們使用ChatGPT作為示範的案例。

### 3.1 使用 ChatGPT 網頁服務

### 3.2 
在這邊你可以體驗ChatGPT的能力，在提供良好的客戶情境中，由於GPT3.5內含1750億個參數量，因此事實上GPT3.5就能夠有非常不錯的回覆成果。如果在ChatGPT網頁服務當中，有訂閱後，就能夠使用GPT4，而這部分雖然沒有公開其內含餐數量，然而就網路上討論、學術文獻上的比較與我們自己的測試結果，可以明顯感受到GPT4的表現更加良好。

以下我們設定一個情境，並將問題同時問給GPT-3.5與GPT-4，讀者可以自行感受其能力表現是否有差異？以及其能力表現是否滿足你的期待？

#### 我們的提問：
```
請你扮演銀行的客戶服務人員

現在有一個來自美國的用戶剛搬來台灣，他想要辦理一個銀行戶頭，請問他需要走過哪些流程呢？

請你完成回覆之後也針對自己的回覆給予0-1的信心水準分數，並說明原因
```
**Note: 我們在這邊使用了角色扮演以及情緒提詞的技巧，更多詳細的資訊請參考教案一的第三單元。**

#### GPT3.5的回覆：
```
對於來自美國的用戶在台灣辦理銀行戶頭，通常需要完成以下流程：

選擇銀行：首先，用戶需要選擇一家台灣的銀行，可以根據該銀行的服務、地理位置、手續費等因素來做選擇。

準備身份證明文件：用戶需要準備有效的身份證明文件，例如護照、台灣居留證（如果有的話）、外國居民證（如果有的話）等。

開立銀行帳戶：前往所選擇的銀行分行，填寫開戶申請表格，提供身份證明文件，並提供基本個人資料（例如姓名、地址、聯絡方式等）。

辦理外匯業務（如果需要）：如果用戶有美元資金，需要辦理外匯業務將美元轉換為台幣。

選擇帳戶類型：用戶可以選擇不同的帳戶類型，如儲蓄帳戶、支票帳戶、定期存款等，視需求而定。

領取銀行卡和網路銀行訪問：銀行會提供用戶一張銀行卡，通常是借記卡或信用卡，以及提供網路銀行訪問的相關資訊，用戶可以透過網路銀行進行線上交易。

設定密碼和安全功能：用戶需要設定個人密碼，以確保帳戶安全，並可能需要設定其他安全功能，如簡訊驗證碼或雙因素認證。

存款或轉帳：用戶可以將資金存入帳戶，或進行轉帳交易。

信心水準分數：0.9

原因：我對於開立銀行戶頭的流程和基本要求有很高的信心，但具體細節可能會因不同銀行的政策和要求而略有不同。此外，用戶的個人情況也可能影響流程的一些細節，所以信心水準稍低於1。如果用戶有特殊需求或情況，建議在前往銀行前先與銀行聯絡，以確保所有文件和流程都得以順利完成。
```

#### GPT4 的回覆：
```
作為一名銀行客戶服務人員，我很樂意幫助這位剛從美國搬來台灣的客戶開立銀行戶頭。以下是開戶的基本流程：

證件準備：客戶需要準備有效的護照和居留證（若已經有）。若客戶是以觀光簽證來台，則可能需要等待轉換成工作簽證或學生簽證才能開戶。

選擇銀行與帳戶類型：客戶需要決定在哪家銀行開戶，並選擇適合的帳戶類型，例如儲蓄帳戶、支票帳戶等。

填寫申請表格：在銀行，客戶需要填寫開戶申請表格。表格中可能會問及個人資訊、在台灣的居住地址、工作情況等。

提交申請：提交申請表格和所需證件給銀行工作人員。

等待審核：銀行會審核客戶的申請。這可能需要幾天時間。

存款：一旦帳戶開設，客戶需要進行首次存款以啟動帳戶。

設定網路銀行與行動銀行：如果客戶需要，可以設定網路銀行和行動銀行，方便管理帳戶。

信心水準：0.9。這份指導基於我的知識和經驗，但考慮到不同銀行可能有特定的政策和程序，我建議客戶直接聯繫他們選定的銀行以獲得最準確的資訊。此外，銀行政策與法規有時會發生變化，因此在某些細節上可能會有所不同。
```

### 3.2 使用 OpenAI API 服務
在ChatGPT網頁服務中體驗到了GPT-3.5與GPT-4的對話能力，如果又利用RAG搭配檢索過去常見QA的情境，其回覆將可能更貼近使用者需要的答案。然而無倫如何，讀者也可以在上一個段落的測試中，體驗到GPT-3.5與GPT-4，如果在你的使用情境中，你認為GPT-4的表現比較可能真正落地，那麼就可以租用OpenAI為GPT-4提供的API服務。

租用費用的部分請參考下表，在此羅列GPT-3.5與GPT-4的API使用費，原則上GPT-4的費用會是GPT-3.5的數倍，原因是因為要維護參數量更多的大型語言模型，將需要利用記憶體更龐大的昂貴硬體。

| 大型語言模型（LLM） | 輸入（Input） | 輸出（Output） | 上下文長度限制（Context） |
| :--: | :--: | :--: | :--: |
| `gpt-3.5-turbo` | $0.001/1K tokens | $0.0020/1K tokens | 16K |
| `gpt-4-1106-preview` | $0.01/1K tokens | $0.03/1K tokens | 128K |
| `gpt-4` | $0.03/1K tokens	| $0.06/1K tokens | 32K |

除了能力與費用的考量外，讀者也需要考量到自己準備使用的服務需要的文字長度大致為何，在一般情境當中原則上GPT-3.5就能夠支援16K的token數了，但針對面對比較極端的情境時，可能就有機會面臨上下文的長度達到限制，需要更大的語言模型才能處理的情況。

## 4. 實際操作
在以下我們模擬第2節和GPT的來回問答，並將完整的流程錄製於下方連結，歡迎各位讀者點擊連結觀看。

<div align=center>
<img src="https://github.com/AI-FREE-Team/Generative-AI-Industrial-Case-Study/blob/main/%E6%95%99%E6%A1%882%EF%BC%9A%E8%AA%9E%E9%9F%B3%E7%94%9F%E6%88%90%E5%AE%A2%E6%9C%8D%E6%A9%9F%E5%99%A8%E4%BA%BA/pics/unit3/Preview.png" width="600px">
</div>
影片連結：https://youtu.be/sEVf4N6O11I

如果讀者也想要嘗試以下的服務，可以下載此連結裡面的程式碼，並且參考第五節的環境部署結果，即可執行。

## 5. 安裝部署流程

### 5.1 下載程式碼
請讀者下載此單元內的所有資料。

### 5.2 安裝環境
請參考 ***environment.yml*** 這份檔案
一鍵安裝環境
```
conda env create -f environment.yml
```

Note: 運行設備為 Win11，請參考[此連結](https://vocus.cc/article/64701a2cfd897800014daed0)安裝 FFMPEG。

### 5.3 填入API Key
請讀者將自己的OpenAI API Key貼到`app.py`的98行，這是非常隱私的鑰匙，請讀者一定要小心保管這個Secret Key。
<div align=center>
<img src="https://github.com/AI-FREE-Team/Generative-AI-Industrial-Case-Study/blob/main/%E6%95%99%E6%A1%882%EF%BC%9A%E8%AA%9E%E9%9F%B3%E7%94%9F%E6%88%90%E5%AE%A2%E6%9C%8D%E6%A9%9F%E5%99%A8%E4%BA%BA/pics/unit3/PlaceYourOpenAIAPIKey.png" width="600px">
</div>

### 5.4 執行 Streamlit 網頁
環境安裝完成後，請在該路徑與環境下執行以下指令。
```
streamlit run app.py
```